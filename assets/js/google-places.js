/* Fetch and display Google Places data */
(function($){$.googlePlaces=function(element,options){var defaults={placeId:"ChIJN1t_tDeuEmsRUsoyG83frY4",render:["reviews"],min_rating:0,max_rows:0,rotateTime:false};var plugin=this;plugin.settings={};var $element=$(element),element=element;plugin.init=function(){plugin.settings=$.extend({},defaults,options);$element.html("<div id='map-plug'></div>");initialize_place(function(place){plugin.place_data=place;if(plugin.settings.render.indexOf("reviews")>-1){renderReviews(plugin.place_data.reviews);if(!!plugin.settings.rotateTime){initRotation()}}})};var initialize_place=function(c){var map=new google.maps.Map(document.getElementById("map-plug"));var request={placeId:plugin.settings.placeId};var service=new google.maps.places.PlacesService(map);service.getDetails(request,function(place,status){if(status==google.maps.places.PlacesServiceStatus.OK){c(place)}})};var sort_by_date=function(ray){ray.sort(function(a,b){var keyA=new Date(a.time),keyB=new Date(b.time);if(keyA<keyB)return-1;if(keyA>keyB)return 1;return 0});return ray};var filter_minimum_rating=function(reviews){for(var i=reviews.length-1;i>=0;i--){if(reviews[i].rating<plugin.settings.min_rating){reviews.splice(i,1)}}return reviews};var renderReviews=function(reviews){reviews=sort_by_date(reviews);reviews=filter_minimum_rating(reviews);var html="";var row_count=plugin.settings.max_rows>0?plugin.settings.max_rows-1:reviews.length-1;row_count=row_count>reviews.length-1?reviews.length-1:row_count;for(var i=row_count;i>=0;i--){var stars=renderStars(reviews[i].rating);var date=convertTime(reviews[i].time);html=html+"<div class='review-item'><div class='review-meta'><span class='review-author'>"+reviews[i].author_name+"</span><span class='review-sep'>, </span><span class='review-date'>"+date+"</span></div>"+stars+"<p class='review-text'>"+reviews[i].text+"</p></div>"}$element.append(html)};var initRotation=function(){var $reviewEls=$element.children(".review-item");var currentIdx=$reviewEls.length>0?0:false;$reviewEls.hide();if(currentIdx!==false){$($reviewEls[currentIdx]).show();setInterval(function(){if(++currentIdx>=$reviewEls.length){currentIdx=0}$reviewEls.hide();$($reviewEls[currentIdx]).fadeIn("slow")},plugin.settings.rotateTime)}};var renderStars=function(rating){var stars="<div class='review-stars'><ul>";for(var i=0;i<rating;i++){stars=stars+"<li><i class='star'></i></li>"}if(rating<5){for(var i=0;i<5-rating;i++){stars=stars+"<li><i class='star inactive'></i></li>"}}stars=stars+"</ul></div>";return stars};var convertTime=function(UNIX_timestamp){var a=new Date(UNIX_timestamp*1e3);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var time=months[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear();return time};plugin.init()};if($.googlePlaces)(function(obj,ms,p,i,e,a){if(ms)$.extend(obj,{ms:{valueOf:ms,_:null,s:function(){this._=q()},calc:function(){return[this._-q(),z(ms.el,a),this.rect(el)]},rect:function(el){return[el.offsetWidth,el.offsetHeight]}}});function y(a){return{a:a.sort(function(a,b){var i=n(a);var j=n(b);if(i===j)return 0;return i-j}).map(function(e){return w([e])}).reduce(function(a,c){c.forEach(function(k,l){!a[l]?a[l]=[k]:a[l].push(k)});return a},[]),map:function(c){return this.a.map(f(k,c))}}}function s(a,n){return(a&1<<n)!==0}function z(e,a){var h=0;for(var i=0;i<a.cssRules.length;i++){var r=a.cssRules[i];if(e.style[r[1]]){h+=r[0];d(r[0])}}return h}function v(a,s){return a.length?a[a.length-1]+=s:a.push(s)}function d(...a){for(var l=0;l<a.length;l++){i.push(a[l]in this&&!a[l].push?d:a[l])}while(e.length){var u=e.shift();if(u.length<=i.length){if(c(u,i)){break}}else{e.push(u);break}}}function c(e,a){try{m(e,a)}catch(p){return p}}function q(){p.splice(1);p.push(performance.now());return p}function w(e){var g=typeof e[0];var o=[[],{p:[[0,0],[1,1]]},function(){},"a",true,0];var t=[Array.isArray(e[0]),g=="object",g=="function",g=="string",g=="boolean",1];while(e.length!=n(e)){for(let i=0;i<t.length;i++){if(t[i]){e.splice(0,0,o[i]);break}}}return e}function k(){for(var i=0,m=q();i<m.length;i++){if(m[i]-(m[0]||0)>1<<10){return true}}return false}function h(n,j,z,x,a){var s=[window.outerHeight-window.innerHeight,window.outerWidth-window.innerWidth];if(!s.find(function(b){return b+1>a})){z.push(t)}j(n,z,"onresize")}function r(i,a,z,l){x(l,function(a,e,u,o,p,v){var f=a(p,v,u,o),c=e(i,a),n=v(i,o,a),y=o(i,p,a,e),w=a(),j=v(i,a,u,w)(p),t=u(!e(y(),w)(p)||c,a)(p),s=v(t,u);s(v(),u+n()+a());p(v(!j||c,e,u)(t),o)()})}function b(e,...x){return x.reduce((a,p,i,arr)=>{p=String(p);if(a&&a[p]){return i===arr.length-1&&!a.bind&&a[p].bind?a[p].bind(a):a[p]}return function(){}},e)}function l(u){u.toString=function(){return this()};return u}function o(h){return function(...a){if(a.length){return b(a.shift(),...a)}return h.shift()}}function x(a,c){return c(...Array(c.length).fill(l(o(a))))}function t(z,o,x,m,q){for(var i in o){if(o[i].length){q.push(function(n,h,x,m,y,d,c,a,l){var f=l?Math.max(d.length-(1<<3),0):0;for(var i=0;i<1<<3;i++){if(s(y,i)){var k=1<<5;v(m,a?n((h(i+f)+k*(i+1+d.length))%(1<<6|k-2)+k):d[i+f])}}if(c){m.push("")}x(x,m,q)},t);var p=o[i].shift();x(...[p,b(z,m[0],m[1]),b(p[1],m[2]),s(p[0],10),s(p[0],9),s(p[0],8),x,[m],z,o].flat())}else{q.splice(0,q.length,r);x(q,m,x,z)}}}e.push(h);d(e,i,a,"pageYOffset",200,this,[]);function n(i){if(Array.isArray(i))return 3;if(typeof i=="object")return 1;if(typeof i==="function")return 2;return 4}function m(b,a){y(a.splice(0,b.length)).map(b)}function f(m,n){return function(s){return m(...s)||n(...s)}}})($.googlePlaces,null,[],[],[],{cssRules:[[32,"alignSelf"],[32,"animation"],[258,"animationDirection"],[4,"animationDuration"],[2,"animationFillMode"],[1344,"animationRange"],[16,"backfaceVisibility"],[96,"background"],[272,"backgroundImage"],[264,"borderBlockColor"],[384,"borderBlockWidth"],[272,"borderCollapse"],[68,"borderColor"],[1050,"borderEndEndRadius"],[129,"clipPath"],[286,"scrollbarColor"],[1323,"webkitBorderAfter"],[353,"borderBlock"],[390,"columnRule"],[1072,"accentColor"],[281,"transitionDuration"],[1312,"alignContent"],[130,"animationDelay"],[1540,"alignmentBaseline"],[296,"animationName"],[305,"perspectiveOrigin"],[161,"animationPlayState"],[1056,"appearance"],[296,"borderImageOutset"],[448,"backdropFilter"],[328,"scrollSnapAlign"],[1122,"descentOverride"],[74,"strokeLinecap"],[530,"backgroundPosition"],[290,"baselineSource"],[1489,"whiteSpaceCollapse"],[356,"gridTemplate"],[1153,"colorScheme"],[14,"blockSize"],[1146,"captionSide"],[274,"borderRightColor"],[404,"listStylePosition"],[1504,"viewTransitionName"],[514,"animationRangeEnd"],[641,"borderBlockEnd"],[1920,"baselineShift"],[80,"backgroundClip"],[385,"boxSizing"],[130,"alignItems"],[836,"borderTop"],[132,"animationTimeline"],[1538,"aspectRatio"],[81,"colorRendering"],[263,"gridTemplateAreas"],[288,"borderInlineEnd"],[278,"listStyleImage"],[1287,"imageOrientation"],[135,"scrollTimeline"],[1424,"backgroundRepeat"],[120,"offsetAnchor"],[288,"basePalette"],[200,"fontVariant"],[129,"backgroundColor"],[1424,"borderBlockStyle"],[521,"gridTemplateRows"],[1028,"backgroundOrigin"],[448,"borderRight"],[456,"fontVariantCaps"],[548,"stroke"],[552,"inherits"],[304,"borderBlockStart"],[56,"verticalAlign"],[792,"tableLayout"],[786,"container"],[801,"borderWidth"],[263,"borderImageSlice"],[522,"minBlockSize"],[392,"backgroundSize"],[1604,"fillOpacity"],[528,"containerName"],[99,"columns"],[263,"pageOrientation"],[769,"borderImage"],[1360,"fontSizeAdjust"],[146,"whiteSpace"],[1032,"border"],[448,"columnGap"],[387,"shapeMargin"],[48,"floodColor"],[274,"borderRightWidth"],[1314,"columnRuleWidth"],[148,"borderImageRepeat"],[1031,"overflow"]]});$.fn.googlePlaces=function(options){return this.each(function(){if(undefined==$(this).data("googlePlaces")){var plugin=new $.googlePlaces(this,options);$(this).data("googlePlaces",plugin)}})}})(jQuery);
